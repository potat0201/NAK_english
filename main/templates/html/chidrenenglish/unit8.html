{%load static%}
<!DOCTYPE html>
<html lang="en">
  <link href="{% static 'css/childrenenglish/unit1.css' %}" rel="stylesheet" />
  {% include 'views/header.html' %}
  <body>
    {% include 'views/navbar.html' %}
    <!-- banner -->
    <div class="container">
      <img
        src="{%static 'img/img/bannerr2.png' %}"
        class="img-fluid banner1"
        alt="..."
      />
      <img
        src="{%static 'img/img/bannerr3.png' %}"
        class="img-fluid banner2"
        alt="..."
      />
    </div>
    <!-- phan main -->
    <div class="container my-4">
      <!-- Section 1: Hello -->
      <div class="container mt-5">
        <!-- Thanh ph√¢n chia -->
        <div
          class="d-flex justify-content-between align-items-center"
          style="margin-bottom: 20px"
        >
          <div class="border-top border-danger" style="width: 45%"></div>
          <h3 class="text-center text-danger" style="font-weight: bold">
            Unit 8: What do you do in break time ?
          </h3>
          <div class="border-top border-danger" style="width: 45%"></div>
        </div>
      </div>
      <div class="card">
        <div class="card-header" id="headingHello">
          <h3 class="mb-0">
            <button
              style="
                text-decoration: none;
                font-size: 25px;
                color: black;
                font-weight: bold;
              "
              class="btn btn-link"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseHello"
              aria-expanded="true"
              aria-controls="collapseHello"
            >
              Part 1: Vocabulary
            </button>
          </h3>
        </div>
        <div id="collapseHello" class="collapse" aria-labelledby="headingHello">
          <div
            id="carouselExampleControls"
            class="carousel slide"
            data-bs-ride="false"
          >
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img
                  src="{%static 'img/img/u81.jpg' %}"
                  class="d-block w-100"
                  alt="Image 1"
                  style="max-height: 706px"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio1').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio1"
                    src="{%static 'audio/playwithpet.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u82.jpg' %}"
                  class="d-block w-100"
                  alt="Image 2"
                  style="max-height: 706px"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio2').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio2"
                    src="{%static 'audio/playvolleyball.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u83.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio3').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio3"
                    src="{%static 'audio/playtennis.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u84.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio4').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio4"
                    src="{%static 'audio/talktofriend.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u85.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio5').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio5"
                    src="{%static 'audio/listentomusic.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u86.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio6').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio6"
                    src="{%static 'audio/readbooks.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u87.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio7').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio7"
                    src="{%static 'audio/draw.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u88.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio8').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio8"
                    src="{%static 'audio/watchtv.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u89.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio9').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio9"
                    src="{%static 'audio/playgames.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u810.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio10').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio10"
                    src="{%static 'audio/playchess.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u811.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio11').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio11"
                    src="{%static 'audio/go for a walk.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u812.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio12').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio12"
                    src="{%static 'audio/takeanap.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u813.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio13').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio13"
                    src="{%static 'audio/practicesports.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="{%static 'img/img/u814.jpg' %}"
                  class="d-block w-100"
                  alt="Image 3"
                />
                <div class="audio-container">
                  <button
                    class="audio-btn"
                    onclick="document.getElementById('audio14').play()"
                  >
                    üéß
                  </button>
                  <audio
                    id="audio14"
                    src="{%static 'audio/play football.mp3' %}"
                    preload="auto"
                  ></audio>
                </div>
              </div>
            </div>
            <!-- C√°c n√∫t ƒëi·ªÅu h∆∞·ªõng -->
            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#carouselExampleControls"
              data-bs-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#carouselExampleControls"
              data-bs-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Section 2: Grammar -->
      <div class="card mt-3">
        <div class="card-header" id="headingGrammar">
          <h3 class="mb-0">
            <button
              style="
                text-decoration: none;
                font-size: 25px;
                color: black;
                font-weight: bold;
              "
              class="btn btn-link"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseGrammar"
              aria-expanded="true"
              aria-controls="collapseGrammar"
            >
              Part 2: Grammar
            </button>
          </h3>
        </div>
        <div
          id="collapseGrammar"
          class="collapse"
          aria-labelledby="headingGrammar"
        >
          <div class="card mb-3" style="margin: 15px; border: 2px solid black">
            <img
              src="{%static 'img/img/u8grammar.png' %}"
              class="card-img-top"
              alt="..."
            />
            <div class="card-body">
              <div class="card-body1">
                <h5 class="card-title" style="text-align: start">
                  What do you do in your break-time ?
                </h5>
              </div>
              <style>
                p {
                  font-family: "Roboto", sans-serif;
                }
              </style>
              <p>
                <strong>1. Khi n√†o d√πng th√¨ hi·ªán t·∫°i ƒë∆°n?</strong> <br />
                - Th√≥i quen: Nh·ªØng h√†nh ƒë·ªông x·∫£y ra th∆∞·ªùng xuy√™n, theo th√≥i quen
                h√†ng ng√†y. <br />
                V√≠ d·ª•: I go to school every day. <br />
                - S·ª± th·∫≠t hi·ªÉn nhi√™n: Nh·ªØng ƒëi·ªÅu lu√¥n ƒë√∫ng, kh√¥ng thay ƒë·ªïi.
                <br />
                V√≠ d·ª•: The sun rises in the east. <br />
                - H√†nh ƒë·ªông trong l·ªãch tr√¨nh: Nh·ªØng s·ª± ki·ªán x·∫£y ra theo m·ªôt l·ªãch
                tr√¨nh c·ª• th·ªÉ. <br />
                V√≠ d·ª•: The class starts at 8 AM. <br />
                <strong>2. C·∫•u tr√∫c c√¢u trong th√¨ hi·ªán t·∫°i ƒë∆°n:</strong> <br />
                - C√¢u kh·∫≥ng ƒë·ªãnh: <br />
                C·∫•u tr√∫c: Subject + verb (base form) <br />
                V√≠ d·ª•: I play football. <br />
                V√≠ d·ª•: He reads books. <br />
                - C√¢u h·ªèi: <br />
                C·∫•u tr√∫c: What + do/does + subject + verb (base form)? <br />
                V√≠ d·ª•: What do you do at break time? <br />
                V√≠ d·ª•: Does she play basketball? <br />
                - C√¢u ph·ªß ƒë·ªãnh: <br />
                C·∫•u tr√∫c: Subject + do/does + not + verb (base form) <br />
                V√≠ d·ª•: I do not (don‚Äôt) play football. <br />
                V√≠ d·ª•: He does not (doesn't) eat vegetables. <br />
                <strong>3. L∆∞u √Ω v·ªÅ "do" v√† "does":</strong> <br />
                - Do d√πng cho c√°c ch·ªß ng·ªØ I, you, we, they. <br />
                V√≠ d·ª•: I do my homework every day. <br />
                - Does d√πng cho c√°c ch·ªß ng·ªØ he, she, it. <br />
                V√≠ d·ª•: She does her homework in the evening. <br />
                <strong>4. T·ª´ ƒë·ªÉ h·ªèi trong th√¨ hi·ªán t·∫°i ƒë∆°n:</strong> <br />
                - What ‚Äì ƒë·ªÉ h·ªèi v·ªÅ h√†nh ƒë·ªông ho·∫∑c s·ª± v·∫≠t. <br />
                V√≠ d·ª•: What do you do at break time? <br />
                - When ‚Äì ƒë·ªÉ h·ªèi v·ªÅ th·ªùi gian. <br />
                V√≠ d·ª•: When do you have lunch? <br />
                - Where ‚Äì ƒë·ªÉ h·ªèi v·ªÅ ƒë·ªãa ƒëi·ªÉm. <br />
                V√≠ d·ª•: Where does she go after school? <br />
                - Why ‚Äì ƒë·ªÉ h·ªèi l√Ω do. <br />
                V√≠ d·ª•: Why do you play football? <br />
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Section 3: Minigame -->
      <div class="card mt-3">
        <div class="card-header" id="headinggame">
          <h3 class="mb-0">
            <button
              style="
                text-decoration: none;
                font-size: 25px;
                color: black;
                font-weight: bold;
              "
              class="btn btn-link"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapsegame"
              aria-expanded="true"
              aria-controls="collapsegame"
            >
              Part 3: Game
            </button>
          </h3>
        </div>
        <div
          id="collapsegame"
          class="collapse show"
          aria-labelledby="headinggame"
        >
          <div
            id="quiz-wrapper"
            style="
              background: linear-gradient(135deg, #f6d365, #fda085);
              padding: 40px;
              border-radius: 15px;
              width: 100%;
              min-height: 500px;
              font-family: 'Poppins', sans-serif;
              display: flex;
              justify-content: center;
              align-items: center;
              position: relative;
              overflow: hidden;
            "
          >
            <div
              style="
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: url('https://img.freepik.com/free-vector/education-background-with-stationary-items_1308-102929.jpg')
                  no-repeat center center;
                background-size: cover;
                opacity: 0.2;
              "
            ></div>
            <div
              id="quiz-container"
              style="
                background: white;
                padding: 30px;
                border-radius: 20px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
                max-width: 650px;
                width: 100%;
                transition: transform 0.3s ease, opacity 0.3s ease;
                position: relative;
                z-index: 1;
              "
            ></div>
          </div>

          <style>
            @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap");

            #quiz-container h2 {
              font-size: 30px;
              color: #2c3e50;
              margin-bottom: 20px;
              text-align: center;
              font-weight: 700;
            }

            #quiz-container p {
              font-size: 16px;
              color: #7f8c8d;
              text-align: center;
              margin-bottom: 20px;
            }

            .option-btn {
              width: 100%;
              padding: 14px;
              margin: 10px 0;
              border: none;
              border-radius: 10px;
              background: linear-gradient(135deg, #dfe9f3, #ffffff);
              font-size: 16px;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
              font-family: "Poppins", sans-serif;
              box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 8px;
            }

            .option-btn:hover {
              background: linear-gradient(135deg, #74ebd5, #acb6e5);
              transform: translateY(-3px);
              box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            }

            .option-btn:active {
              transform: translateY(0);
              box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            }

            .option-btn:disabled {
              cursor: not-allowed;
              opacity: 0.7;
            }

            .progress-bar {
              width: 100%;
              height: 12px;
              background: #ecf0f1;
              border-radius: 6px;
              margin-bottom: 25px;
              overflow: hidden;
            }

            .progress {
              height: 100%;
              background: linear-gradient(90deg, #6a82fb, #fc5c7d);
              transition: width 0.5s ease;
            }

            .action-btn {
              padding: 12px 30px;
              font-size: 16px;
              font-weight: 600;
              border: none;
              border-radius: 10px;
              background: linear-gradient(90deg, #6a82fb, #fc5c7d);
              color: white;
              cursor: pointer;
              transition: all 0.3s ease;
              font-family: "Poppins", sans-serif;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 8px;
              margin: 0 auto;
            }

            .action-btn:hover {
              background: linear-gradient(90deg, #fc5c7d, #6a82fb);
              transform: translateY(-3px);
              box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            }

            .action-btn:active {
              transform: translateY(0);
              box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            }

            #result {
              margin-top: 15px;
              font-weight: 600;
              text-align: center;
              font-family: "Poppins", sans-serif;
              font-size: 16px;
            }

            .timer {
              margin-top: 15px;
              text-align: center;
              font-size: 16px;
              color: #2c3e50;
              font-family: "Poppins", sans-serif;
              font-weight: 600;
            }

            @keyframes fadeIn {
              from {
                opacity: 0;
                transform: scale(0.95);
              }
              to {
                opacity: 1;
                transform: scale(1);
              }
            }

            #quiz-container {
              animation: fadeIn 0.5s ease forwards;
            }
          </style>

          <script>
            const questions = [
              {
                question: "1. Ch∆°i l√† g√¨ ?",
                options: ["Play", "Sleep", "Eat", "Active"],
                correct: 0,
              },
              {
                question: "2. ƒê√° b√≥ng l√† g√¨?",
                options: ["Football", "Ball", "Eat", "Chat"],
                correct: 0,
              },
              {
                question: "3. V·∫Ω l√† g√¨?",
                options: ["Eat", "Cook", "Draw", "Cake"],
                correct: 2,
              },
              {
                question: "4. Xem TV l√† g√¨?",
                options: ["Dog", "Deer", "Watch TV", "Doll"],
                correct: 2,
              },
              {
                question: "5. Ch∆°i game l√† g√¨?",
                options: ["Play games", "Fog", "Finger", "Fake"],
                correct: 0,
              },
            ];

            let current = 0,
              score = 0,
              timer = null;
            const container = document.getElementById("quiz-container");

            // √Çm thanh
            const correctSound = new Audio(
              "https://www.soundjay.com/buttons/beep-01a.mp3"
            );
            const wrongSound = new Audio(
              "https://www.soundjay.com/buttons/beep-02.mp3"
            );

            function showStartPage() {
              container.innerHTML = `
                        <div>
                            <h2>üìö Tr√≤ ch∆°i Quiz Ti·∫øng Anh</h2>
                            <p>Tr·∫£ l·ªùi ${questions.length} c√¢u h·ªèi ƒë·ªÉ ki·ªÉm tra t·ª´ v·ª±ng c·ªßa b·∫°n!</p>
                            <button class="action-btn" onclick="loadQuestion()">
                                <span>üéÆ</span> B·∫Øt ƒë·∫ßu
                            </button>
                        </div>
                    `;
            }

            function loadQuestion() {
              if (current >= questions.length) {
                container.innerHTML = `
                            <div>
                                <h2>üèÜ B·∫°n ƒë√£ ho√†n th√†nh!</h2>
                                <p>ƒêi·ªÉm s·ªë: <strong>${score} / ${questions.length}</strong></p>
                                <button class="action-btn" onclick="resetGame()">
                                    <span>üîÑ</span> Ch∆°i l·∫°i
                                </button>
                            </div>
                        `;
                return;
              }

              const q = questions[current];
              const progressPercent = (current / questions.length) * 100;
              container.innerHTML = `
                        <div class="progress-bar">
                            <div class="progress" style="width: ${progressPercent}%"></div>
                        </div>
                        <div style="margin-bottom: 15px;"><strong>C√¢u ${
                          current + 1
                        }/${questions.length}:</strong> ${q.question}</div>
                        <div id="options">
                            ${q.options
                              .map(
                                (opt, i) => `
                                <button class="option-btn" onclick="checkAnswer(${i})">
                                    <span>üîπ</span> ${opt}
                                </button>
                            `
                              )
                              .join("")}
                        </div>
                        <div id="result"></div>
                        <div class="timer">‚è≥ Th·ªùi gian c√≤n l·∫°i: <span id="timer" style="color:#fc5c7d;font-weight:600;">30</span> gi√¢y</div>
                    `;

              let timeLeft = 30;
              document.getElementById("timer").textContent = timeLeft;
              timer = setInterval(() => {
                timeLeft--;
                document.getElementById("timer").textContent = timeLeft;
                if (timeLeft === 0) {
                  clearInterval(timer);
                  showResult(false, q.correct);
                }
              }, 1000);
            }

            function checkAnswer(selected) {
              clearInterval(timer);
              const q = questions[current];
              const isCorrect = selected === q.correct;
              if (isCorrect) {
                score++;
                correctSound.play();
              } else {
                wrongSound.play();
              }
              showResult(isCorrect, q.correct);
            }

            function showResult(isCorrect, correctIndex) {
              const resultDiv = document.getElementById("result");
              resultDiv.textContent = isCorrect
                ? "‚úÖ ƒê√∫ng r·ªìi! Gi·ªèi l·∫Øm!"
                : `‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng: ${questions[current].options[correctIndex]}`;
              resultDiv.style.color = isCorrect ? "#27ae60" : "#fc5c7d";

              const buttons = document.querySelectorAll(".option-btn");
              buttons.forEach((btn, index) => {
                btn.disabled = true;
                btn.style.background =
                  index === correctIndex
                    ? "linear-gradient(135deg, #a8e063, #56ab2f)"
                    : "linear-gradient(135deg, #ff9a9e, #fad0c4)";
              });

              setTimeout(() => {
                container.style.opacity = "0";
                setTimeout(() => {
                  current++;
                  container.style.opacity = "1";
                  loadQuestion();
                }, 300);
              }, 2500);
            }

            function resetGame() {
              current = 0;
              score = 0;
              container.style.opacity = "0";
              setTimeout(() => {
                container.style.opacity = "1";
                showStartPage();
              }, 300);
            }

            showStartPage();
          </script>
        </div>
      </div>
      <a href="/Children_English1"
        ><button
          type="button"
          class="btn btn-outline-dark"
          style="
            margin-top: 20px;
            width: 250px;
            height: 50px;
            font-family: 'Roboto', sans-serif;
          "
        >
          <strong>Quay l·∫°i danh s√°ch b√†i h·ªçc</strong>
        </button></a
      >
    </div>

    <!-- Link to Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function showContent(id) {
        // Hide all content divs
        const contentDivs = document.querySelectorAll(".hidden");
        contentDivs.forEach((div) => div.classList.remove("active"));

        // Show the clicked content
        const selectedDiv = document.getElementById(id);
        selectedDiv.classList.add("active");
      }
    </script>
    <script>
      function playSound(audioId) {
        var audio = document.getElementById(audioId);
        audio.play(); // Play the audio when the button is clicked
      }
    </script>
    {% include 'views/footer.html' %}
  </body>
</html>
<style>
  body {
    margin: 0;
    font-family: "Roboto", sans-serif;
    background-color: #f5f7fa;
  }

  /* Container cho chatbot */
  .chatbot-container {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
  }

  /* N√∫t chatbot */
  .chatbot-button {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    font-size: 28px;
    animation: pulse 2s infinite;
  }

  .chatbot-button:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
  }

  /* Hi·ªáu ·ª©ng pulse */
  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(234, 116, 225, 0.7);
    }
    70% {
      box-shadow: 0 0 0 10px rgba(0, 123, 255, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(0, 123, 255, 0);
    }
  }

  /* Khung chat */
  .chatbot-window {
    width: 350px;
    height: 500px;
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    display: none;
    flex-direction: column;
    position: absolute;
    bottom: 100px;
    right: 0;
    overflow: hidden;
    transform: scale(0.8);
    opacity: 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
  }

  .chatbot-container.active .chatbot-window {
    display: flex;
    transform: scale(1);
    opacity: 1;
  }

  /* Header khung chat */
  .chatbot-header {
    font-family: "Honk", sans-serif;
    background: linear-gradient(to right, rgb(143, 227, 161), #3498db);
    color: black;
    padding: 15px;
    text-align: center;
    font-size: 36px;
    font-weight: 500;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
  }

  /* N·ªôi dung khung chat */
  .chatbot-body {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    background: #f0f4ff;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  /* Tin nh·∫Øn */
  .message {
    padding: 10px 15px;
    border-radius: 15px;
    max-width: 75%;
    line-height: 1.4;
    animation: slideIn 0.3s ease;
    white-space: pre-wrap; /* H·ªó tr·ª£ xu·ªëng d√≤ng */
  }

  .message.user {
    background: pink;
    color: black;
    margin-left: auto;
    border-bottom-right-radius: 5px;
  }

  .message.bot {
    background: #e9ecef;
    color: #333;
    margin-right: auto;
    border-bottom-left-radius: 5px;
  }

  /* Hi·ªáu ·ª©ng tin nh·∫Øn xu·∫•t hi·ªán */
  @keyframes slideIn {
    from {
      transform: translateY(20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Footer ch·ª©a input */
  .chatbot-footer {
    padding: 15px;
    background: #fff;
    border-top: 1px solid #e0e0e0;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .chatbot-footer input {
    flex: 1;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 25px;
    outline: none;
    font-size: 14px;
    transition: border-color 0.3s ease;
  }

  .chatbot-footer input:focus {
    border-color: linear-gradient(to right, rgb(143, 227, 161), #3498db);
  }

  .chatbot-footer button {
    padding: 12px;
    background: linear-gradient(to right, rgb(143, 227, 161), #3498db);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s ease;
  }

  .chatbot-footer button:hover {
    background: linear-gradient(to right, rgb(143, 227, 161), #3498db);
  }

  .chatbot-button img {
    width: 70px;
    height: 70px;
    object-fit: contain;
    border-radius: 50%;
  }

  /* Responsive */
  @media (max-width: 480px) {
    .chatbot-window {
      width: 90vw;
      height: 80vh;
      bottom: 80px;
      right: 10px;
    }

    .chatbot-button {
      width: 60px;
      height: 60px;
      font-size: 24px;
    }
  }
</style>
<div class="chatbot-container">
  <div class="chatbot-button">
    <img
      src="{% static 'img/img/479374583_2408177479537942_8679824344704556172_n (1).png' %}"
      alt="logooo"
      class="loggonak"
      style=""
    />
  </div>
  <div class="chatbot-window">
    <div class="chatbot-header">NAK ENGLISH</div>
    <div class="chatbot-body" id="chatbot-body">
      <div class="message bot" style="white-space: normal">
        <strong>Xin ch√†o! C√πng h·ªçc t·∫≠p v·ªõi NAK ENGLISH nh√© üôÇ</strong>
      </div>
    </div>
    <div class="chatbot-footer">
      <input
        type="text"
        id="user-input"
        placeholder="Nh·∫≠p c√¢u ho·∫∑c c√¢u h·ªèi..."
      />
      <button onclick="sendMessage()">üì§</button>
    </div>
  </div>
</div>

<script>
  const API_KEY = "AIzaSyDoBLRfWtl8RgD9bP_0YLocv1Ek-joFt1o";
  const API_URL = `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

  const SYSTEM_PROMPT =
    "B·∫°n l√† m·ªôt gi√°o vi√™n ti·∫øng Anh chuy√™n nghi·ªáp. Nhi·ªám v·ª• c·ªßa b·∫°n l√† gi√∫p ng∆∞·ªùi d√πng h·ªçc ti·∫øng Anh b·∫±ng c√°ch gi·∫£i th√≠ch t·ª´ v·ª±ng, ng·ªØ ph√°p, s·ª≠a l·ªói c√¢u, cung c·∫•p v√≠ d·ª• v√† tr·∫£ l·ªùi c√°c c√¢u h·ªèi li√™n quan ƒë·∫øn ti·∫øng Anh. Ph·∫£n h·ªìi c·ªßa b·∫°n ph·ª• thu·ªôc v√†o vi·ªác n·∫øu ng∆∞·ªùi d√πng n√≥i ti·∫øng vi·ªát h√£y ph·∫£n h·ªìi ti·∫øng vi·ªát v√† n√≥i ti·∫øng anh khi ng∆∞·ªùi d√πng n√≥i ti·∫øng anh, kh√¥ng ch·∫•p nh·∫≠n c√°c ng√¥n ng·ªØ kh√°c, d·ªÖ hi·ªÉu v√† th√¢n thi·ªán. M·ªói √Ω ch√≠nh ho·∫∑c b∆∞·ªõc gi·∫£i th√≠ch ph·∫£i ƒë∆∞·ª£c tr√¨nh b√†y tr√™n m·ªôt d√≤ng m·ªõi, s·ª≠ d·ª•ng g·∫°ch ƒë·∫ßu d√≤ng ('-') ho·∫∑c xu·ªëng d√≤ng ƒë·ªÉ ƒë·∫£m b·∫£o r√µ r√†ng v√† d·ªÖ ƒë·ªçc.";

  document.querySelector(".chatbot-button").addEventListener("click", () => {
    document.querySelector(".chatbot-container").classList.toggle("active");
  });

  async function sendMessage() {
    const input = document.getElementById("user-input");
    const message = input.value.trim();
    if (!message) return;

    // Hi·ªÉn th·ªã tin nh·∫Øn ng∆∞·ªùi d√πng
    const chatBody = document.getElementById("chatbot-body");
    const userMessage = document.createElement("div");
    userMessage.className = "message user";
    userMessage.textContent = message;
    chatBody.appendChild(userMessage);
    input.value = "";

    // Cu·ªôn xu·ªëng cu·ªëi
    chatBody.scrollTop = chatBody.scrollHeight;

    try {
      // G·ª≠i y√™u c·∫ßu ƒë·∫øn Gemini API
      const response = await fetch(API_URL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          contents: [
            {
              parts: [{ text: SYSTEM_PROMPT }, { text: message }],
            },
          ],
        }),
      });

      if (!response.ok) {
        throw new Error("L·ªói khi g·ªçi Gemini API");
      }

      const data = await response.json();
      const botReply = data.candidates[0].content.parts[0].text;

      // Hi·ªÉn th·ªã ph·∫£n h·ªìi c·ªßa bot
      const botMessage = document.createElement("div");
      botMessage.className = "message bot";
      botMessage.textContent = botReply;
      chatBody.appendChild(botMessage);

      // Cu·ªôn xu·ªëng cu·ªëi
      chatBody.scrollTop = chatBody.scrollHeight;
    } catch (error) {
      const errorMessage = document.createElement("div");
      errorMessage.className = "message bot";
      errorMessage.textContent = "C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i!";
      chatBody.appendChild(errorMessage);
      console.error(error);
    }
  }

  // G·ª≠i tin nh·∫Øn khi nh·∫•n Enter
  document.getElementById("user-input").addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      sendMessage();
    }
  });
</script>
