{% load static %}
<!DOCTYPE html>
<html lang="en">
  {% include 'views/header.html' %}
  <style>
    .card-title{
      margin-top: 0px;
    }
  </style>
  <body>
    <!-- header -->
        {% include 'views/navbar.html' %}

    <!-- banner -->
    <div class="container">
      <img src="{%static 'img/img/bannerr2.png' %}" class="img-fluid banner1" alt="..." >
      <img src="{%static 'img/img/banneraldult.png' %}" class="img-fluid banner2" alt="..." >
    </div>
    <!-- phan noi dung tieng anh tre em -->
    <div class="container">
        <h1><strong>Aldult's English - Advanced Course</strong></h1>
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <div class="col">
              <div class="card h-100">
                <img src="{%static 'img/img/advunit1.png' %}" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">Unit 1 - Science and Technology
                  </h5>
                  <p class="card-text">
                    H·ªçc c√°c t·ª´ v·ª±ng v·ªÅ khoa h·ªçc c√¥ng ngh·ªá, c√°c ƒë·ªì d√πng c√¥ng ngh·ªá c√≥ xung quanh ch√∫ng ta. <br>
                    Computer, tablet, Smartphone, ...
                  </p>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card h-100">
                <img src="{%static 'img/img/advunit2.png' %}" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">
                    Unit 2 - House Problems
                  </h5>
                  <p class="card-text">Trong b√†i h·ªçc n√†y, c√°c b·∫°n s·∫Ω ƒë∆∞·ª£c l√†m quen v·ªõi c√°c t·ª´ li√™n quan ƒë·∫øn c√°c v·∫•n ƒë·ªÅ th∆∞·ªùng g·∫∑p v·ªõi ng√¥i nh√† c·ªßa b·∫°n, nh·ªØng ƒë·ªông t·ª´, t√≠nh t·ª´ ph·ªï bi·∫øn ƒë·ªÉ m√¥ t·∫£ nh·ªØng v·∫•n ƒë·ªÅ ƒë√≥. Ch√∫c c√°c b·∫°n c√≥ m·ªôt b√†i h·ªçc th·∫≠t h·ªØu √≠ch!</p>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card h-100">
                <img src="{%static 'img/img/advunit3.png' %}" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">Unit 3 - Travel and Transportation</h5>
                  <p class="card-text">·ªû ƒë∆°n v·ªã b√†i h·ªçc n√†y, ch√∫ng ta s·∫Ω kh√°m ph√° c√°c t·ª´ v·ª±ng v·ªÅ du l·ªãch v√† giao th√¥ng. B·∫°n s·∫Ω h·ªçc c√°ch n√≥i v·ªÅ c√°c ph∆∞∆°ng ti·ªán giao th√¥ng, c√°ch ƒëi l·∫°i v√† c√°c ƒë·ªãa ƒëi·ªÉm du l·ªãch ph·ªï bi·∫øn.</p>
                </div>
              </div>
            </div>
        </div>
    </div>
    <div class="container box">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <div class="col">
              <div class="card h-100">
                <img src="{%static 'img/img/advunit4.png' %}" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">Unit 4 - Fashion Style
                  </h5>
                  <p class="card-text">
                    N·∫øu b·∫°n l√† ng∆∞·ªùi ƒëam m√™ th·ªùi trang, v√† lu√¥n mu·ªën t√¨m hi·ªÉu v·ªÅ xu h∆∞·ªõng th·ªùi trang m·ªõi nh·∫•t tr√™n th·∫ø gi·ªõi, b√†i h·ªçc ng√†y h√¥m nay h·∫≥n s·∫Ω r·∫•t b·ªï √≠ch v√¨ ch√∫ng t√¥i s·∫Ω gi·ªõi thi·ªáu v·ªõi c√°c b·∫°n m·ªôt s·ªë t·ª´ ph·ªï bi·∫øn v·ªÅ th·ªùi trang ƒë·ªÉ gi√∫p c√°c b·∫°n ti·∫øp c·∫≠n v·ªõi lƒ©nh v·ª±c n√†y nh√©. 
                  </p>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card h-100">
                <img src="{%static 'img/img/advunit5.png' %}" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">
                    Unit 5 - Tastes and Senses 
                  </h5>
                  <p class="card-text">H√£y c√πng ƒë·∫øn v·ªõi b√†i h·ªçc t·ª´ v·ª±ng ng√†y h√¥m nay ƒë·ªÉ c√πng t√¨m hi·ªÉu v·ªÅ nh·ªØng h∆∞∆°ng v·ªã v√† c·∫£m x√∫c m√† ch√∫ng ta th∆∞·ªùng tr·∫£i nghi·ªám nh√©!</p>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card h-100">
                <img src="{%static 'img/img/advunit6.png' %}" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">Unit 6 - Arts and Entertainment
                    </h5>
                  <p class="card-text">C√°c b·∫°n ƒëang ƒë·∫øn v·ªõi b√†i h·ªçc t·ª´ v·ª±ng s·ªë 6 ƒë·ªÉ c√πng hi·ªÉu v·ªÅ nh·ªØng t·ª´ li√™n quan ƒë·∫øn ch·ªß ƒë·ªÅ ngh·ªá thu·∫≠t v√† gi·∫£i tr√≠. V·ªõi m·ªói t·ª´, c√°c b·∫°n h√£y t·ª± luy·ªán t·∫≠p b·∫±ng c√°ch nghe m·∫´u, ƒë·ªçc theo nhi·ªÅu l·∫ßn v√† ƒë·∫∑t th√™m cho m√¨nh nh·ªØng v√≠ d·ª• sinh ƒë·ªông kh√°c n·ªØa nh√©!</p>
                </div>
              </div>
            </div>
        </div>
    </div>
    <div class="container box">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <div class="col">
              <div class="card h-100">
                <img src="{%static 'img/img/advunit7.png' %}" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">
                    Unit 7: Culture Diversity
                  </h5>
                  <p class="card-text">
                    S·ª± ƒëa d·∫°ng trong vƒÉn h√≥a lu√¥n c√≥ m·ªôt s·ª©c h·∫•p d·∫´n l·ªõn ƒë·ªëi v·ªõi t·∫•t c·∫£ m·ªçi ng∆∞·ªùi. VƒÉn h√≥a kh√¥ng b√≥ h·∫πp trong ƒë∆∞·ªùng bi√™n gi·ªõi c·ªßa m·ªói n∆∞·ªõc m√† ng√†y c√†ng tr·ªù th√†nh ti·ªÅn ƒë·ªÅ c·ªßa vi·ªác h·ªôi nh·∫≠p v√† hi·ªÉu nhau c·ªßa c√°c qu·ªëc gia. B√†i h·ªçc t·ª´ v·ª±ng ng√†y h√¥m nay s·∫Ω gi·ªõi thi·ªáu v·ªõi c√°c b·∫°n v·ªÅ t·ª´ v√† ng·ªØ li√™n quan v·ªÅ ch·ªß ƒë·ªÅ n√†y nh√©!</p>
                  </p>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card h-100">
                <img src="{%static 'img/img/advunit8.png' %}" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">
                    Unit 8: Monney Matters
                  </h5>
                  <p class="card-text">Trong b√†i h·ªçc n√†y, c√°c b·∫°n s·∫Ω l√†m quen v·ªõi c√°c t·ª´ v√† di·ªÖn ƒë·∫°t th√¥ng d·ª•ng v·ªÅ c√°c v·∫•n ƒë·ªÅ ti·ªÅn t·ªá. V·ªõi m·ªói t·ª´, c√°c b·∫°n h√£y t·ª± luy·ªán t·∫≠p b·∫±ng c√°ch ƒë·∫∑t th√™m cho m√¨nh nh·ªØng v√≠ d·ª• sinh ƒë·ªông kh√°c n·ªØa nh√©!</p>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card h-100">
                <img src="{%static 'img/img/advunit9.png' %}" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">
                    Unit 10: Social Issues </h5>
                  <p class="card-text">ƒê·ªìng h√†nh v·ªõi gu·ªìng quay cu·ªôc s·ªëng ƒë√≥ l√† nh·ªØng v·∫•n n·∫°n x√£ h·ªôi kh√¥ng th·ªÉ th·ªù ∆°. B√†i h·ªçc ng√†y h√¥m nay s·∫Ω c·∫≠p nh·∫≠t nh·ªØng t∆∞ v·ª±ng li√™n quan ƒë·∫øn nh·ªØng ch·ªß ƒë·ªÅ nh·ª©c nh·ªëi, v√† l√† m·ªëi quan t√¢m c·ªßa kh√¥ng ch·ªâ ri√™ng qu·ªëc gia n√†o nh∆∞ an sinh x√£ h·ªôi, tham nh≈©ng hay ch·ªß quy·ªÅn l√£nh th·ªï</p>
                  </p>
                </div>
              </div>
            </div>
        </div>
    </div>
    {% include 'views/footer.html' %}
  </body>
</html>
<style>
  body {
    margin: 0;
    font-family: "Roboto", sans-serif;
    background-color: #f5f7fa;
  }

  /* Container cho chatbot */
  .chatbot-container {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
  }

  /* N√∫t chatbot */
  .chatbot-button {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    font-size: 28px;
    animation: pulse 2s infinite;
  }

  .chatbot-button:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
  }

  /* Hi·ªáu ·ª©ng pulse */
  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(234, 116, 225, 0.7);
    }
    70% {
      box-shadow: 0 0 0 10px rgba(0, 123, 255, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(0, 123, 255, 0);
    }
  }

  /* Khung chat */
  .chatbot-window {
    width: 350px;
    height: 500px;
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    display: none;
    flex-direction: column;
    position: absolute;
    bottom: 100px;
    right: 0;
    overflow: hidden;
    transform: scale(0.8);
    opacity: 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
  }

  .chatbot-container.active .chatbot-window {
    display: flex;
    transform: scale(1);
    opacity: 1;
  }

  /* Header khung chat */
  .chatbot-header {
    font-family: "Honk", sans-serif;
    background: linear-gradient(to right, rgb(143, 227, 161), #3498db);
    color: black;
    padding: 15px;
    text-align: center;
    font-size: 36px;
    font-weight: 500;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
  }

  /* N·ªôi dung khung chat */
  .chatbot-body {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    background: #f0f4ff;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  /* Tin nh·∫Øn */
  .message {
    padding: 10px 15px;
    border-radius: 15px;
    max-width: 75%;
    line-height: 1.4;
    animation: slideIn 0.3s ease;
    white-space: pre-wrap; /* H·ªó tr·ª£ xu·ªëng d√≤ng */
  }

  .message.user {
    background: pink;
    color: black;
    margin-left: auto;
    border-bottom-right-radius: 5px;
  }

  .message.bot {
    background: #e9ecef;
    color: #333;
    margin-right: auto;
    border-bottom-left-radius: 5px;
  }

  /* Hi·ªáu ·ª©ng tin nh·∫Øn xu·∫•t hi·ªán */
  @keyframes slideIn {
    from {
      transform: translateY(20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Footer ch·ª©a input */
  .chatbot-footer {
    padding: 15px;
    background: #fff;
    border-top: 1px solid #e0e0e0;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .chatbot-footer input {
    flex: 1;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 25px;
    outline: none;
    font-size: 14px;
    transition: border-color 0.3s ease;
  }

  .chatbot-footer input:focus {
    border-color: linear-gradient(to right, rgb(143, 227, 161), #3498db);
  }

  .chatbot-footer button {
    padding: 12px;
    background: linear-gradient(to right, rgb(143, 227, 161), #3498db);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s ease;
  }

  .chatbot-footer button:hover {
    background: linear-gradient(to right, rgb(143, 227, 161), #3498db);
  }

  .chatbot-button img {
    width: 70px;
    height: 70px;
    object-fit: contain;
    border-radius: 50%;
  }

  /* Responsive */
  @media (max-width: 480px) {
    .chatbot-window {
      width: 90vw;
      height: 80vh;
      bottom: 80px;
      right: 10px;
    }

    .chatbot-button {
      width: 60px;
      height: 60px;
      font-size: 24px;
    }
  }
</style>
<div class="chatbot-container">
  <div class="chatbot-button">
    <img
      src="{% static 'img/img/479374583_2408177479537942_8679824344704556172_n (1).png' %}"
      alt="logooo"
      class="loggonak"
      style=""
    />
  </div>
  <div class="chatbot-window">
    <div class="chatbot-header">NAK ENGLISH</div>
    <div class="chatbot-body" id="chatbot-body">
      <div class="message bot" style="white-space: normal">
        <strong>Xin ch√†o! C√πng h·ªçc t·∫≠p v·ªõi NAK ENGLISH nh√© üôÇ</strong>
      </div>
    </div>
    <div class="chatbot-footer">
      <input
        type="text"
        id="user-input"
        placeholder="Nh·∫≠p c√¢u ho·∫∑c c√¢u h·ªèi..."
      />
      <button onclick="sendMessage()">üì§</button>
    </div>
  </div>
</div>

<script>
  const API_KEY = "AIzaSyDoBLRfWtl8RgD9bP_0YLocv1Ek-joFt1o";
  const API_URL = `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

  const SYSTEM_PROMPT =
    "B·∫°n l√† m·ªôt gi√°o vi√™n ti·∫øng Anh chuy√™n nghi·ªáp. Nhi·ªám v·ª• c·ªßa b·∫°n l√† gi√∫p ng∆∞·ªùi d√πng h·ªçc ti·∫øng Anh b·∫±ng c√°ch gi·∫£i th√≠ch t·ª´ v·ª±ng, ng·ªØ ph√°p, s·ª≠a l·ªói c√¢u, cung c·∫•p v√≠ d·ª• v√† tr·∫£ l·ªùi c√°c c√¢u h·ªèi li√™n quan ƒë·∫øn ti·∫øng Anh. Ph·∫£n h·ªìi c·ªßa b·∫°n ph·ª• thu·ªôc v√†o vi·ªác n·∫øu ng∆∞·ªùi d√πng n√≥i ti·∫øng vi·ªát h√£y ph·∫£n h·ªìi ti·∫øng vi·ªát v√† n√≥i ti·∫øng anh khi ng∆∞·ªùi d√πng n√≥i ti·∫øng anh, kh√¥ng ch·∫•p nh·∫≠n c√°c ng√¥n ng·ªØ kh√°c, d·ªÖ hi·ªÉu v√† th√¢n thi·ªán. M·ªói √Ω ch√≠nh ho·∫∑c b∆∞·ªõc gi·∫£i th√≠ch ph·∫£i ƒë∆∞·ª£c tr√¨nh b√†y tr√™n m·ªôt d√≤ng m·ªõi, s·ª≠ d·ª•ng g·∫°ch ƒë·∫ßu d√≤ng ('-') ho·∫∑c xu·ªëng d√≤ng ƒë·ªÉ ƒë·∫£m b·∫£o r√µ r√†ng v√† d·ªÖ ƒë·ªçc.";

  document.querySelector(".chatbot-button").addEventListener("click", () => {
    document.querySelector(".chatbot-container").classList.toggle("active");
  });

  async function sendMessage() {
    const input = document.getElementById("user-input");
    const message = input.value.trim();
    if (!message) return;

    // Hi·ªÉn th·ªã tin nh·∫Øn ng∆∞·ªùi d√πng
    const chatBody = document.getElementById("chatbot-body");
    const userMessage = document.createElement("div");
    userMessage.className = "message user";
    userMessage.textContent = message;
    chatBody.appendChild(userMessage);
    input.value = "";

    // Cu·ªôn xu·ªëng cu·ªëi
    chatBody.scrollTop = chatBody.scrollHeight;

    try {
      // G·ª≠i y√™u c·∫ßu ƒë·∫øn Gemini API
      const response = await fetch(API_URL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          contents: [
            {
              parts: [{ text: SYSTEM_PROMPT }, { text: message }],
            },
          ],
        }),
      });

      if (!response.ok) {
        throw new Error("L·ªói khi g·ªçi Gemini API");
      }

      const data = await response.json();
      const botReply = data.candidates[0].content.parts[0].text;

      // Hi·ªÉn th·ªã ph·∫£n h·ªìi c·ªßa bot
      const botMessage = document.createElement("div");
      botMessage.className = "message bot";
      botMessage.textContent = botReply;
      chatBody.appendChild(botMessage);

      // Cu·ªôn xu·ªëng cu·ªëi
      chatBody.scrollTop = chatBody.scrollHeight;
    } catch (error) {
      const errorMessage = document.createElement("div");
      errorMessage.className = "message bot";
      errorMessage.textContent = "C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i!";
      chatBody.appendChild(errorMessage);
      console.error(error);
    }
  }

  // G·ª≠i tin nh·∫Øn khi nh·∫•n Enter
  document.getElementById("user-input").addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      sendMessage();
    }
  });
</script>