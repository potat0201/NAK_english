{% load static %}
<!DOCTYPE html>
<html lang="en">
  <link href="{% static 'css/childrenenglish/unit1.css' %}" rel="stylesheet" />
  {% include 'views/header.html' %}
  <body>
    {% include 'views/navbar.html' %}
    <!-- banner -->
    <div class="container">
      <img src="{% static 'img/img/bannerr2.png' %}" class="img-fluid banner1" alt="..." >
      <img src="{% static 'img/img/bannerr3.png' %}" class="img-fluid banner2" alt="..." >
    </div>
    <!-- phan main -->
    <div class="container my-4">
        <!-- Section 1: Hello -->
        <div class="container mt-5">
          <!-- Thanh phÃ¢n chia -->
          <div class="d-flex justify-content-between align-items-center" style="margin-bottom: 20px;">
            <div class="border-top border-danger" style="width: 45%;"></div>
            <h3 class="text-center text-danger" style="font-weight: bold;">Unit 2: What is your name ?</h3>
            <div class="border-top border-danger" style="width: 45%;"></div>
          </div>
        </div>
        <div class="card">
            <div class="card-header" id="headingHello">
                <h3 class="mb-0">
                    <button style="text-decoration: none; font-size: 25px; color: black; font-weight: bold;" class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHello" aria-expanded="true" aria-controls="collapseHello">
                        Part 1: Vocabulary
                    </button>
                </h3>
            </div>
            <div id="collapseHello" class="collapse" aria-labelledby="headingHello">
                <div id="carouselExampleControls" class="carousel slide" data-bs-ride="false">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="{% static 'img/img/u29.jpg' %}" class="d-block w-100" alt="Image 1" style="max-height: 706px;">
                            <div class="audio-container">
                                <button class="audio-btn" onclick="document.getElementById('audio1').play()">ğŸ§</button>
                                <audio id="audio1" src="{% static 'audio/name.mp3' %}" preload="auto"></audio>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="{% static 'img/img/u26.jpg' %}" class="d-block w-100" alt="Image 2" style="max-height: 706px;">
                            <div class="audio-container">
                                <button class="audio-btn" onclick="document.getElementById('audio2').play()">ğŸ§</button>
                                <audio id="audio2" src="{% static 'audio/first-name.mp3' %}" preload="auto"></audio>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="{% static 'img/img/u21.jpg' %}" class="d-block w-100" alt="Image 3">
                            <div class="audio-container">
                                <button class="audio-btn" onclick="document.getElementById('audio3').play()">ğŸ§</button>
                                <audio id="audio3" src="{% static 'audio/last-name.mp3' %}" preload="auto"></audio>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img src="{% static 'img/img/u22.jpg' %}" class="d-block w-100" alt="Image 3">
                          <div class="audio-container">
                              <button class="audio-btn" onclick="document.getElementById('audio4').play()">ğŸ§</button>
                              <audio id="audio4" src="{% static 'audio/full-name.mp3' %}" preload="auto"></audio>
                          </div>
                        </div>
                        <div class="carousel-item">
                          <img src="{% static 'img/img/u23.jpg' %}" class="d-block w-100" alt="Image 3">
                          <div class="audio-container">
                              <button class="audio-btn" onclick="document.getElementById('audio5').play()">ğŸ§</button>
                              <audio id="audio5" src="{% static 'audio/nickname.mp3' %}" preload="auto"></audio>
                          </div>
                        </div>
                        <div class="carousel-item">
                          <img src="{% static 'img/img/u24.jpg' %}" class="d-block w-100" alt="Image 3">
                          <div class="audio-container">
                              <button class="audio-btn" onclick="document.getElementById('audio6').play()">ğŸ§</button>
                              <audio id="audio6" src="{% static 'audio/spell.mp3' %}" preload="auto"></audio>
                          </div>
                        </div>
                        <div class="carousel-item">
                          <img src="{% static 'img/img/u25.jpg' %}" class="d-block w-100" alt="Image 3">
                          <div class="audio-container">
                              <button class="audio-btn" onclick="document.getElementById('audio7').play()">ğŸ§</button>
                              <audio id="audio7" src="{% static 'audio/howdoyouspell.mp3' %}" preload="auto"></audio>
                          </div>
                        </div>
                        <div class="carousel-item">
                          <img src="{% static 'img/img/u27.jpg' %}" class="d-block w-100" alt="Image 3">
                          <div class="audio-container">
                              <button class="audio-btn" onclick="document.getElementById('audio8').play()">ğŸ§</button>
                              <audio id="audio8" src="{% static 'audio/mynameis.mp3' %}" preload="auto"></audio>
                          </div>
                        </div>
                        <div class="carousel-item">
                          <img src="{% static 'img/img/u28.jpg' %}" class="d-block w-100" alt="Image 3">
                          <div class="audio-container">
                              <button class="audio-btn" onclick="document.getElementById('audio9').play()">ğŸ§</button>
                              <audio id="audio9" src="{% static 'audio/nicetomeetyou.mp3' %}" preload="auto"></audio>
                          </div>
                        </div>
                    </div>
                    <!-- CÃ¡c nÃºt Ä‘iá»u hÆ°á»›ng -->
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Section 2: Grammar -->
        <div class="card mt-3">
          <div class="card-header" id="headingGrammar">
            <h3 class="mb-0">
                <button style="text-decoration: none; font-size: 25px; color: black; font-weight: bold;" class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGrammar" aria-expanded="true" aria-controls="collapseGrammar">
                    Part 2: Grammar
                </button>
            </h3>
          </div>
          <div id="collapseGrammar" class="collapse" aria-labelledby="headingGrammar">
            <div class="card mb-3" style="margin: 15px; border: 2px solid black;">
              <img src="{% static 'img/img/u2grammar.png' %}" class="card-img-top" alt="...">
              <div class="card-body">
                <div class="card-body1">
                    <h5 class="card-title" style="text-align: start;">What is your name ?</h5>
                </div>
                <style>
                  p{
                    font-family: 'Roboto', sans-serif;
                  }
                </style>
                <p class="card-text"><strong>Khi chÃºng ta muá»‘n há»i tÃªn ai Ä‘Ã³ báº±ng tiáº¿ng Anh, ta dÃ¹ng cÃ¢u:</strong> <br>

                    ğŸ‘‰ â€œWhat is your name?â€ <br>
                    (CÃ¢u nÃ y cÃ³ nghÄ©a lÃ : â€œTÃªn cá»§a báº¡n lÃ  gÃ¬?â€) <br>
                    
                    CÃ¡ch tráº£ lá»i ráº¥t Ä‘Æ¡n giáº£n vÃ  vui nhá»™n. MÃ¬nh chá»‰ cáº§n nÃ³i: <br>
                    
                    ğŸ‘‰ â€œMy name is...â€ + tÃªn cá»§a mÃ¬nh. <br>
                    VÃ­ dá»¥: â€œMy name is Linh.â€ (TÃªn cá»§a mÃ¬nh lÃ  Linh.) <br>
                </p>
                <p>
                    <br><strong>ğŸˆ LÃ m quen vá»›i cÃ¡ch viáº¿t táº¯t:</strong></br>
                    Trong giao tiáº¿p háº±ng ngÃ y, ngÆ°á»i báº£n xá»© thÆ°á»ng nÃ³i vÃ  viáº¿t nhanh hÆ¡n báº±ng cÃ¡ch rÃºt gá»n. VÃ­ dá»¥: <br>
                    - â€œWhat isâ€ sáº½ thÃ nh â€œWhatâ€™sâ€ <br>
                    ğŸ‘‰ â€œWhatâ€™s your name?â€ (Thay vÃ¬ â€œWhat is your name?â€) <br>
                    - â€œMy name isâ€ thÃ¬ váº«n giá»¯ nguyÃªn, nhÆ°ng nÃ³i nháº¹ nhÃ ng, dá»… thÆ°Æ¡ng hÆ¡n. <br>
                </p>
                <p>
                    <strong>ğŸ‘§ğŸ‘¦ Há»i tÃªn ngÆ°á»i khÃ¡c </strong><br>
                    - Náº¿u báº¡n muá»‘n há»i tÃªn má»™t báº¡n khÃ¡c, báº¡n cÃ³ thá»ƒ nÃ³i: <br>
                    ğŸ‘‰ â€œWhatâ€™s his name?â€ â€“ TÃªn cá»§a cáº­u áº¥y lÃ  gÃ¬? <br>
                    ğŸ‘‰ â€œWhatâ€™s her name?â€ â€“ TÃªn cá»§a cÃ´ áº¥y lÃ  gÃ¬? <br>
                    - CÃ¡ch tráº£ lá»i: <br>
                    ğŸ‘‰ â€œHis name is Tom.â€ (TÃªn cá»§a cáº­u áº¥y lÃ  Tom.) <br>
                    ğŸ‘‰ â€œHer name is Anna.â€ (TÃªn cá»§a cÃ´ áº¥y lÃ  Anna.) <br>
                </p>
                <p>
                    <strong>ğŸ“ Há»i cÃ¡ch Ä‘Ã¡nh váº§n tÃªn</strong> <br> <br>
                    - Náº¿u báº¡n chÆ°a nghe rÃµ tÃªn, báº¡n cÃ³ thá»ƒ há»i: <br>

                    ğŸ‘‰ â€œHow do you spell your name?â€ <br>
                    (CÃ³ nghÄ©a lÃ : â€œBáº¡n Ä‘Ã¡nh váº§n tÃªn cá»§a mÃ¬nh nhÆ° tháº¿ nÃ o?â€) <br>
                    - VÃ­ dá»¥: <br>
                    â€œHow do you spell your name?â€ <br>
                    â€œL-I-N-Hâ€ <br>
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Section 3: Minigame -->
        <div class="card mt-3">
          <div class="card-header" id="headinggame">
            <h3 class="mb-0">
              <button
                style="
                  text-decoration: none;
                  font-size: 25px;
                  color: black;
                  font-weight: bold;
                "
                class="btn btn-link"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapsegame"
                aria-expanded="true"
                aria-controls="collapsegame"
              >
                Part 3: Game
              </button>
            </h3>
          </div>
          <div
            id="collapsegame"
            class="collapse show"
            aria-labelledby="headinggame"
          >
            <div
              id="quiz-wrapper"
              style="
                background: linear-gradient(to bottom, #aee1f9, #e1c4f9);
                padding: 40px;
                border-radius: 12px;
                width: 100%;
                height: 50%;
                font-family: Arial;
              "
            >
              <div
                id="quiz-container"
                style="
                  background: white;
                  padding: 20px;
                  border-radius: 10px;
                  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                "
              ></div>
            </div>
  
            <script>
              const questions = [
              {
                question: "1. Name lÃ  gÃ¬ ?",
                options: ["TÃªn", "Há»", "Biá»‡t danh", "Há» vÃ  tÃªn"],
                correct: 0,
              },
              {
                question: "2. ÄÃ¡nh váº§n lÃ  gÃ¬?",
                options: ["Spell", "Read", "Write", "Watch"],
                correct: 0,
              },
              {
                question: "3. Ráº¥t vui gáº·p báº¡n lÃ  gÃ¬ ",
                options: ["Nice to meet you", "You are welcom", "I very happy", "I hate hÄ‘b"],
                correct: 0,
              },
              {
                question: "4. CÃ¡ch giá»›i thiá»‡u tÃªn ?",
                options: ["My name is", "My dog is hÄ‘b", "i love you", "i hate bugs"],
                correct: 1,
              },
              {
                question: "5. báº¡n Ä‘Ã¡nh váº§n tÃªn mÃ¬nh Ä‘Æ°á»£c khÃ´ng?",
                options: ["Can you spell your name", "H-Ä-B", "No i cant", "i am stupid"],
                correct: 0,
              },
              ];
  
              let current = 0,
                score = 0,
                timer = null;
              const container = document.getElementById("quiz-container");
  
              function showStartPage() {
                container.innerHTML = `
              <div style="text-align:center;">
                <h2>ğŸ§  TrÃ² chÆ¡i Quiz</h2>
                <p>Tráº£ lá»i 10 cÃ¢u há»i trong thá»i gian giá»›i háº¡n!</p>
                <button onclick="loadQuestion()" style="padding: 12px 24px; font-size: 16px; border:none; border-radius:6px; background:#4caf50; color:white; cursor:pointer;">Báº¯t Ä‘áº§u</button>
              </div>
            `;
              }
  
              function loadQuestion() {
                if (current >= questions.length) {
                  container.innerHTML = `
                <div style="text-align:center;">
                  <h2>ğŸ‰ Báº¡n Ä‘Ã£ hoÃ n thÃ nh!</h2>
                  <p>Äiá»ƒm sá»‘: <strong>${score} / ${questions.length}</strong></p>
                </div>
              `;
                  return;
                }
  
                const q = questions[current];
                container.innerHTML = `
              <div style="margin-bottom: 10px;"><strong>CÃ¢u ${current + 1}/${
                  questions.length
                }:</strong> ${q.question}</div>
              <div id="options">
                ${q.options
                  .map(
                    (opt, i) => `
                  <button onclick="checkAnswer(${i})" style="width:100%;padding:12px;margin:6px 0;border:none;border-radius:6px;background:#e0e0e0;font-size:16px;cursor:pointer;">${opt}</button>
                `
                  )
                  .join("")}
              </div>
              <div id="result" style="margin-top:10px;font-weight:bold;"></div>
              <div style="margin-top:10px;">â± Thá»i gian cÃ²n láº¡i: <span id="timer" style="color:#d32f2f;font-weight:bold;">30</span> giÃ¢y</div>
            `;
  
                let timeLeft = 30;
                document.getElementById("timer").textContent = timeLeft;
                timer = setInterval(() => {
                  timeLeft--;
                  document.getElementById("timer").textContent = timeLeft;
                  if (timeLeft === 0) {
                    clearInterval(timer);
                    showResult(false, q.correct);
                  }
                }, 1000);
              }
  
              function checkAnswer(selected) {
                clearInterval(timer);
                const q = questions[current];
                const isCorrect = selected === q.correct;
                if (isCorrect) score++;
                showResult(isCorrect, q.correct);
              }
  
              function showResult(isCorrect, correctIndex) {
                const resultDiv = document.getElementById("result");
                resultDiv.textContent = isCorrect
                  ? "âœ… ChÃ­nh xÃ¡c!"
                  : `âŒ Sai! ÄÃ¡p Ã¡n Ä‘Ãºng: ${questions[current].options[correctIndex]}`;
                resultDiv.style.color = isCorrect ? "#388e3c" : "#d32f2f";
  
                const buttons = document.querySelectorAll("#options button");
                buttons.forEach((btn, index) => {
                  btn.disabled = true;
                  btn.style.background =
                    index === correctIndex ? "#c8e6c9" : "#ffcdd2";
                });
  
                setTimeout(() => {
                  current++;
                  loadQuestion();
                }, 2500);
              }
  
              showStartPage();
            </script>
          </div>
        </div>
        <a href="/Children_English1"><button type="button" class="btn btn-outline-dark" style="margin-top: 20px; width: 250px; height: 50px; font-family: 'Roboto', sans-serif;"><strong>Quay láº¡i danh sÃ¡ch bÃ i há»c</strong></button></a>
    </div>

    <!-- Link to Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function showContent(id) {
    // Hide all content divs
    const contentDivs = document.querySelectorAll('.hidden');
    contentDivs.forEach(div => div.classList.remove('active'));

    // Show the clicked content
    const selectedDiv = document.getElementById(id);
    selectedDiv.classList.add('active');
}

    </script>
    <script>
      function playSound(audioId) {
          var audio = document.getElementById(audioId);
          audio.play(); // Play the audio when the button is clicked
      }
  </script>
  {% include 'views/footer.html' %}
  </body>
</html>
<style>
  body {
    margin: 0;
    font-family: "Roboto", sans-serif;
    background-color: #f5f7fa;
  }

  /* Container cho chatbot */
  .chatbot-container {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
  }

  /* NÃºt chatbot */
  .chatbot-button {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    font-size: 28px;
    animation: pulse 2s infinite;
  }

  .chatbot-button:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
  }

  /* Hiá»‡u á»©ng pulse */
  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(234, 116, 225, 0.7);
    }
    70% {
      box-shadow: 0 0 0 10px rgba(0, 123, 255, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(0, 123, 255, 0);
    }
  }

  /* Khung chat */
  .chatbot-window {
    width: 350px;
    height: 500px;
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    display: none;
    flex-direction: column;
    position: absolute;
    bottom: 100px;
    right: 0;
    overflow: hidden;
    transform: scale(0.8);
    opacity: 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
  }

  .chatbot-container.active .chatbot-window {
    display: flex;
    transform: scale(1);
    opacity: 1;
  }

  /* Header khung chat */
  .chatbot-header {
    font-family: "Honk", sans-serif;
    background: linear-gradient(to right, rgb(143, 227, 161), #3498db);
    color: black;
    padding: 15px;
    text-align: center;
    font-size: 36px;
    font-weight: 500;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
  }

  /* Ná»™i dung khung chat */
  .chatbot-body {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    background: #f0f4ff;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  /* Tin nháº¯n */
  .message {
    padding: 10px 15px;
    border-radius: 15px;
    max-width: 75%;
    line-height: 1.4;
    animation: slideIn 0.3s ease;
    white-space: pre-wrap; /* Há»— trá»£ xuá»‘ng dÃ²ng */
  }

  .message.user {
    background: pink;
    color: black;
    margin-left: auto;
    border-bottom-right-radius: 5px;
  }

  .message.bot {
    background: #e9ecef;
    color: #333;
    margin-right: auto;
    border-bottom-left-radius: 5px;
  }

  /* Hiá»‡u á»©ng tin nháº¯n xuáº¥t hiá»‡n */
  @keyframes slideIn {
    from {
      transform: translateY(20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Footer chá»©a input */
  .chatbot-footer {
    padding: 15px;
    background: #fff;
    border-top: 1px solid #e0e0e0;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .chatbot-footer input {
    flex: 1;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 25px;
    outline: none;
    font-size: 14px;
    transition: border-color 0.3s ease;
  }

  .chatbot-footer input:focus {
    border-color: linear-gradient(to right, rgb(143, 227, 161), #3498db);
  }

  .chatbot-footer button {
    padding: 12px;
    background: linear-gradient(to right, rgb(143, 227, 161), #3498db);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s ease;
  }

  .chatbot-footer button:hover {
    background: linear-gradient(to right, rgb(143, 227, 161), #3498db);
  }

  .chatbot-button img {
    width: 70px;
    height: 70px;
    object-fit: contain;
    border-radius: 50%;
  }

  /* Responsive */
  @media (max-width: 480px) {
    .chatbot-window {
      width: 90vw;
      height: 80vh;
      bottom: 80px;
      right: 10px;
    }

    .chatbot-button {
      width: 60px;
      height: 60px;
      font-size: 24px;
    }
  }
</style>
<div class="chatbot-container">
  <div class="chatbot-button">
    <img
      src="{% static 'img/img/479374583_2408177479537942_8679824344704556172_n (1).png' %}"
      alt="logooo"
      class="loggonak"
      style=""
    />
  </div>
  <div class="chatbot-window">
    <div class="chatbot-header">NAK ENGLISH</div>
    <div class="chatbot-body" id="chatbot-body">
      <div class="message bot" style="white-space: normal">
        <strong>Xin chÃ o! CÃ¹ng há»c táº­p vá»›i NAK ENGLISH nhÃ© ğŸ™‚</strong>
      </div>
    </div>
    <div class="chatbot-footer">
      <input
        type="text"
        id="user-input"
        placeholder="Nháº­p cÃ¢u hoáº·c cÃ¢u há»i..."
      />
      <button onclick="sendMessage()">ğŸ“¤</button>
    </div>
  </div>
</div>

<script>
  const API_KEY = "AIzaSyDoBLRfWtl8RgD9bP_0YLocv1Ek-joFt1o";
  const API_URL = `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

  const SYSTEM_PROMPT =
    "Báº¡n lÃ  má»™t giÃ¡o viÃªn tiáº¿ng Anh chuyÃªn nghiá»‡p. Nhiá»‡m vá»¥ cá»§a báº¡n lÃ  giÃºp ngÆ°á»i dÃ¹ng há»c tiáº¿ng Anh báº±ng cÃ¡ch giáº£i thÃ­ch tá»« vá»±ng, ngá»¯ phÃ¡p, sá»­a lá»—i cÃ¢u, cung cáº¥p vÃ­ dá»¥ vÃ  tráº£ lá»i cÃ¡c cÃ¢u há»i liÃªn quan Ä‘áº¿n tiáº¿ng Anh. Pháº£n há»“i cá»§a báº¡n phá»¥ thuá»™c vÃ o viá»‡c náº¿u ngÆ°á»i dÃ¹ng nÃ³i tiáº¿ng viá»‡t hÃ£y pháº£n há»“i tiáº¿ng viá»‡t vÃ  nÃ³i tiáº¿ng anh khi ngÆ°á»i dÃ¹ng nÃ³i tiáº¿ng anh, khÃ´ng cháº¥p nháº­n cÃ¡c ngÃ´n ngá»¯ khÃ¡c, dá»… hiá»ƒu vÃ  thÃ¢n thiá»‡n. Má»—i Ã½ chÃ­nh hoáº·c bÆ°á»›c giáº£i thÃ­ch pháº£i Ä‘Æ°á»£c trÃ¬nh bÃ y trÃªn má»™t dÃ²ng má»›i, sá»­ dá»¥ng gáº¡ch Ä‘áº§u dÃ²ng ('-') hoáº·c xuá»‘ng dÃ²ng Ä‘á»ƒ Ä‘áº£m báº£o rÃµ rÃ ng vÃ  dá»… Ä‘á»c.";

  document.querySelector(".chatbot-button").addEventListener("click", () => {
    document.querySelector(".chatbot-container").classList.toggle("active");
  });

  async function sendMessage() {
    const input = document.getElementById("user-input");
    const message = input.value.trim();
    if (!message) return;

    // Hiá»ƒn thá»‹ tin nháº¯n ngÆ°á»i dÃ¹ng
    const chatBody = document.getElementById("chatbot-body");
    const userMessage = document.createElement("div");
    userMessage.className = "message user";
    userMessage.textContent = message;
    chatBody.appendChild(userMessage);
    input.value = "";

    // Cuá»™n xuá»‘ng cuá»‘i
    chatBody.scrollTop = chatBody.scrollHeight;

    try {
      // Gá»­i yÃªu cáº§u Ä‘áº¿n Gemini API
      const response = await fetch(API_URL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          contents: [
            {
              parts: [{ text: SYSTEM_PROMPT }, { text: message }],
            },
          ],
        }),
      });

      if (!response.ok) {
        throw new Error("Lá»—i khi gá»i Gemini API");
      }

      const data = await response.json();
      const botReply = data.candidates[0].content.parts[0].text;

      // Hiá»ƒn thá»‹ pháº£n há»“i cá»§a bot
      const botMessage = document.createElement("div");
      botMessage.className = "message bot";
      botMessage.textContent = botReply;
      chatBody.appendChild(botMessage);

      // Cuá»™n xuá»‘ng cuá»‘i
      chatBody.scrollTop = chatBody.scrollHeight;
    } catch (error) {
      const errorMessage = document.createElement("div");
      errorMessage.className = "message bot";
      errorMessage.textContent = "CÃ³ lá»—i xáº£y ra. Vui lÃ²ng thá»­ láº¡i!";
      chatBody.appendChild(errorMessage);
      console.error(error);
    }
  }

  // Gá»­i tin nháº¯n khi nháº¥n Enter
  document.getElementById("user-input").addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      sendMessage();
    }
  });
</script>